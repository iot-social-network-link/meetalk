.login-background-image
.logo
.row.vertical-offset.panel-animate
  .col-md-4.col-md-offset-4.col-sm-6.col-sm-offset-3
    .panel.panel-default
      .panel-body.text-center
        - if @user.present? and @user.errors.any?
          - @user.errors.full_messages.each do |msg|
            %p= msg
        =form_for @user, :url => { :action => 'casting' } do |f|
          = f.label :name, '今すぐトークを始めよう！'
          = f.text_field :name, class: 'form-control', placeholder: 'ニックネーム', maxlength: '10'
          %span
            2文字以上10文字以内で入力してね
          .form-group 
            %img.radio-group{id:'male', src:'assets/male.png', width:70, height:70}
            %img.radio-group{id:'female', src:'assets/female.png', width:70, height:70}
            %input{name:'user[gender]', type:'hidden'}
            %br
            %br
            = f.submit "CAST NOW", id: 'submit', class: 'btn btn-lg btn-success btn-block'
:javascript
    $(function(){
      view.animatePanel();
      view.checkForm();
      view.makeRadioBtn();
    });

  var view = function (){};

  //-----------------------------------
  // パネルデフォルト表示
  //-----------------------------------
  view.animatePanel = function(){
    $('.panel-animate').animate({
      'opacity' : '1.0', 'padding-top' : '100px'
    },1000);
  }

  //-----------------------------------
  // name入力後にボタンをenable化
  //-----------------------------------
  view.checkForm = function() {
    var test = $('#submit').prop('disabled', true);

    $('#user_name').on('keydown keyup keypress change', function(e){
      if ($(this).val().length >= 2 && $("input[name='user[gender]']").val()){
        $('#submit').prop('disabled', false);
      }else{
        $('#submit').prop('disabled', true);
      }
    });
    $(".radio-group").on('click', function(e){
      if ($('#user_name').val().length >= 2){
        $('#submit').prop('disabled', false);
      }else{
        $('#submit').prop('disabled', true);
      }
    });
  }

  //-----------------------------------
  // 性別選択ボタンへの属性付与
  //-----------------------------------
  view.makeRadioBtn = function() {
    $(".radio-group").click(function(){
      if(this.id=="male"){
        $("#male").attr("src", "assets/male_selected.png");
        $("#female").attr("src", "assets/female.png");
        $("input[name='user[gender]']").attr({
          value: "male",
          id: "user_gender_male"
        });
      } else if(this.id=="female"){
        $("#male").attr("src", "assets/male.png");
        $("#female").attr("src", "assets/female_selected.png");
        $("input[name='user[gender]']").attr({
          value: "female",
          id: "user_gender_female"
        });
      }

    });
  }
  
